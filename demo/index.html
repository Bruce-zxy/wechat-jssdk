<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1.0, user-scalable=no">
  <title>Wechat JSSDK DEMO</title>
  <!--<script src="//res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>-->
  <script src="//cdn.bootcss.com/zepto/1.1.6/zepto.min.js"></script>
  <script src="/client.js"></script>
</head>
<body>
  <p>点击右上角分享!</p>
  <script type="text/javascript">
    var config = {
      "appId": "wxfc9c5237ebf480aa",
      success: function() {
        console.log('success');
      },
      error: function(err) {
        console.error(err)
      },
      debug: true
    };
    $.ajax({
      type: 'GET',
      url: '/get-signature',
      dataType: 'json',
      data: {
        url: location.href
      },
      success: function(data) {
        config.nonceStr = data.nonceStr;
        config.signature = data.signature;
        config.timestamp = data.timestamp;
        config.jsApiList = ['hideMenuItems', 'onMenuShareTimeline'];
        var w = window._wechat_jssdk(config);
        w.setChatConfig({
          title: 'test title',
          desc: 'Share Description',
          success: function() {
            console.log('share success');
          },
          cancel: function() {
            console.log('share canceled');
          },
          imgUrl: 'http://pic1.ooopic.com/uploadfilepic/shiliang/2009-10-05/OOOPIC_00cyl_20091005e2c6eb1c889e342e.jpg'
        });
      }
    });
  </script>
</body>
</html>